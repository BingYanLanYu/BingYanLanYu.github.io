<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Ubuntu 24.04 安装 Docker | 蓝羽天空</title><meta name="author" content="蓝羽天空"><meta name="copyright" content="蓝羽天空"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="在虚拟机 VMware 的 Linux 系统中安装 Docker">
<meta property="og:type" content="article">
<meta property="og:title" content="Ubuntu 24.04 安装 Docker">
<meta property="og:url" content="http://example.com/2025/10/31/7.%E4%BA%91%E5%8E%9F%E7%94%9F%E4%B8%8E%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/Docker/Ubuntu%2024.04%20%E5%AE%89%E8%A3%85%20Docker/index.html">
<meta property="og:site_name" content="蓝羽天空">
<meta property="og:description" content="在虚拟机 VMware 的 Linux 系统中安装 Docker">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://to-all-read.oss-cn-hangzhou.aliyuncs.com/blog/logo/Ubuntu2404Docker%E5%AE%89%E8%A3%85-logo.jpg">
<meta property="article:published_time" content="2025-10-30T16:00:00.000Z">
<meta property="article:modified_time" content="2025-10-30T16:00:00.000Z">
<meta property="article:author" content="蓝羽天空">
<meta property="article:tag" content="Docker">
<meta property="article:tag" content="安装">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://to-all-read.oss-cn-hangzhou.aliyuncs.com/blog/logo/Ubuntu2404Docker%E5%AE%89%E8%A3%85-logo.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Ubuntu 24.04 安装 Docker",
  "url": "http://example.com/2025/10/31/7.%E4%BA%91%E5%8E%9F%E7%94%9F%E4%B8%8E%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/Docker/Ubuntu%2024.04%20%E5%AE%89%E8%A3%85%20Docker/",
  "image": "https://to-all-read.oss-cn-hangzhou.aliyuncs.com/blog/logo/Ubuntu2404Docker%E5%AE%89%E8%A3%85-logo.jpg",
  "datePublished": "2025-10-30T16:00:00.000Z",
  "dateModified": "2025-10-30T16:00:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "蓝羽天空",
      "url": "http://example.com"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2025/10/31/7.%E4%BA%91%E5%8E%9F%E7%94%9F%E4%B8%8E%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/Docker/Ubuntu%2024.04%20%E5%AE%89%E8%A3%85%20Docker/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":500,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Ubuntu 24.04 安装 Docker',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 8.0.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/butterfly-icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">3</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://to-all-read.oss-cn-hangzhou.aliyuncs.com/blog/logo/Ubuntu2404Docker%E5%AE%89%E8%A3%85-logo.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">蓝羽天空</span></a><a class="nav-page-title" href="/"><span class="site-name">Ubuntu 24.04 安装 Docker</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Ubuntu 24.04 安装 Docker</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-10-30T16:00:00.000Z" title="发表于 2025-10-31 00:00:00">2025-10-31</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-10-30T16:00:00.000Z" title="更新于 2025-10-31 00:00:00">2025-10-31</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E4%BA%91%E5%8E%9F%E7%94%9F%E4%B8%8E%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/">云原生与分布式架构</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">4.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>15分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h2 id="一、环境说明"><a href="#一、环境说明" class="headerlink" title="一、环境说明"></a>一、环境说明</h2><p>虚拟机：VMware Workstation Pro 17</p>
<p>系统：Ubuntu 24.04.2 服务器版</p>
<p>SSH：FinalShell 4.5.12</p>
<p>当前系统状态为刚完成安装，进行一些基础配置。</p>
<p>当前登录用户为普通用户，因此所有命令都需要添加 <code>sudo</code> 命令来临时获得 <code>root</code> 权限。至于需要输入密码的问题，通过修改 <code>/etc/sudoers</code> 来解决。</p>
<p>因为当前使用的是 VMware，考虑到安装过程可能出现意外，建议对当前系统环境拍摄快照，以便后期恢复。</p>
<p>拍摄快照：VMware 选中当前计算机 - 右键选中「快照」 - 「拍摄快照」。</p>
<p>官方安装文档：<a target="_blank" rel="noopener" href="https://docker.cadn.net.cn/manuals/engine_install_ubuntu">在 Ubuntu 上安装 Docker Engine</a></p>
<h2 id="二、安装-Docker"><a href="#二、安装-Docker" class="headerlink" title="二、安装 Docker"></a>二、安装 Docker</h2><h3 id="2-1-验证当前系统是否安装-Docker"><a href="#2-1-验证当前系统是否安装-Docker" class="headerlink" title="2.1 验证当前系统是否安装 Docker"></a>2.1 验证当前系统是否安装 Docker</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker -v</span><br></pre></td></tr></table></figure>

<p><img src="https://to-all-read.oss-cn-hangzhou.aliyuncs.com/blog/2025%2F10%2F31%2FUbuntu%2024.04%20%E5%AE%89%E8%A3%85%20Docker.assets%2FUbuntu2404Docker%E5%AE%89%E8%A3%85-25103017-01.png" alt="Ubuntu2404Docker安装-25103017-01"> </p>
<p>可以看到当前系统并没有安装 Docker 引擎，同时系统给出了安装语句，但我们通常建议使用 Docker 官方源安装最新版本，而不是使用 Ubuntu 自带的 docker.io（可能较旧）。</p>
<h3 id="2-2-更新软件包索引"><a href="#2-2-更新软件包索引" class="headerlink" title="2.2 更新软件包索引"></a>2.2 更新软件包索引</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br></pre></td></tr></table></figure>

<p>在安装软件前推荐先执行此命令，用于刷新本地的软件包索引，这样可以确保后续安装或升级时获取的是最新版本信息。</p>
<h3 id="2-3-安装依赖包"><a href="#2-3-安装依赖包" class="headerlink" title="2.3 安装依赖包"></a>2.3 安装依赖包</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install -y ca-certificates curl</span><br></pre></td></tr></table></figure>

<ul>
<li><code>ca-certificates</code>：允许系统信任 HTTPS 证书，用于安全地访问网络源。</li>
<li><code>curl</code>：命令行工具，用于从网络下载文件（如 Docker 的 GPG 密钥）。</li>
</ul>
<h3 id="2-4-创建用于存储-GPG-密钥的目录"><a href="#2-4-创建用于存储-GPG-密钥的目录" class="headerlink" title="2.4 创建用于存储 GPG 密钥的目录"></a>2.4 创建用于存储 GPG 密钥的目录</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> install -m 0755 -d /etc/apt/keyrings</span><br></pre></td></tr></table></figure>

<ul>
<li><code>install</code>：一个用于复制文件和创建目录的命令，比 <code>mkdir</code> 和 <code>chmod</code> 的组合更简洁。</li>
<li><code>-m 0755</code>：设置目录的权限为 <code>0755</code>（所有者可读、写、执行，其他用户可读和执行）。这是存储密钥目录的标准权限。</li>
<li><code>-d</code>：指定要创建的是目录而不是文件。</li>
<li><code>/etc/apt/keyrings</code>：APT 包管理器推荐的用于存储第三方软件仓库密钥的目录。</li>
</ul>
<h3 id="2-5-下载-GPG-密钥"><a href="#2-5-下载-GPG-密钥" class="headerlink" title="2.5 下载 GPG 密钥"></a>2.5 下载 GPG 密钥</h3><p>下载 Docker 官方的 GPG 密钥，并将其保存到上一步创建的目录中。</p>
<p><strong>GPG 密钥用于验证 Docker 软件包的“身份”和“完整性”，确保你下载的 Docker 软件包来自可信的源头，并且在传输过程中没有被任何人篡改或植入恶意代码。</strong></p>
<p>在官方中使用下载的地址是：<a target="_blank" rel="noopener" href="https://download.docker.com/linux/ubuntu/gpg%EF%BC%8C%E6%AD%A4%E5%A4%84%E6%94%B9%E4%B8%BA%E9%98%BF%E9%87%8C%E4%BA%91%E9%95%9C%E5%83%8F%E5%9C%B0%E5%9D%80%EF%BC%8C%E4%BD%86%E4%B8%8B%E8%BD%BD%E4%B8%8B%E6%9D%A5%E7%9A%84%E8%BF%98%E6%98%AF%E5%AE%98%E6%96%B9%E7%9A%84">https://download.docker.com/linux/ubuntu/gpg，此处改为阿里云镜像地址，但下载下来的还是官方的</a> GPG 密钥。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> curl -fsSL http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc</span><br></pre></td></tr></table></figure>

<ul>
<li><code>-f</code> 或 <code>--fail</code>：让 curl 在服务器错误时静默失败（不输出 HTML 错误页面）。</li>
<li><code>-s</code> 或 <code>--silent</code>：静默模式，不显示进度条或错误信息。</li>
<li><code>-S</code> 或 <code>--show-error</code>：与 <code>-s</code> 一起使用时，如果失败会显示错误信息。</li>
<li><code>-L</code> 或 <code>--location</code>：如果请求的页面发生了重定向，则自动跟随重定向。</li>
<li><code>-o /etc/apt/keyrings/docker.asc</code>：将下载的内容输出到指定文件。文件扩展名 <code>.asc</code> 表明这是一个 ASCII 格式的 GPG 密钥。</li>
</ul>
<h3 id="2-6-更改密钥文件的权限"><a href="#2-6-更改密钥文件的权限" class="headerlink" title="2.6 更改密钥文件的权限"></a>2.6 更改密钥文件的权限</h3><p>为所有用户添加可读的权限，这样所有用户下载时都可以通过密钥进行验证。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> a+r /etc/apt/keyrings/docker.asc</span><br></pre></td></tr></table></figure>

<ul>
<li><code>chmod a+r</code>：<code>a</code> 代表所有用户 (all)，<code>+r</code> 代表添加读取 (read) 权限。</li>
</ul>
<h3 id="2-7-添加-Docker-的软件源"><a href="#2-7-添加-Docker-的软件源" class="headerlink" title="2.7 添加 Docker 的软件源"></a>2.7 添加 Docker 的软件源</h3><p>将 Docker 的官方软件源添加到 Ubuntu 24.04 的软件源列表，<code>apt install</code> 时用于获取官方源提供 Docker CE 的所有组件：<code>docker-ce</code>, <code>docker-ce-cli</code>, <code>containerd.io</code>, <code>docker-buildx-plugin</code>, <code>docker-compose-plugin</code> 等。</p>
<p><strong>即告诉 Ubuntu 系统，以后获取 Docker 软件包不要从 Ubuntu 自己的仓库找，而要从 Docker 官方的这个特定地址获取，并且使用指定的 GPG 密钥来验证这些软件包的真伪</strong>。</p>
<p>此处地址为官方地址的阿里云镜像地址，Docker 官方地址为：<a target="_blank" rel="noopener" href="https://download.docker.com/linux/ubuntu%E3%80%82">https://download.docker.com/linux/ubuntu。</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> \</span><br><span class="line">  <span class="string">&quot;deb [arch=<span class="subst">$(dpkg --print-architecture)</span> signed-by=/etc/apt/keyrings/docker.asc] http://mirrors.aliyun.com/docker-ce/linux/ubuntu \</span></span><br><span class="line"><span class="string">  <span class="subst">$(. /etc/os-release &amp;&amp; echo <span class="string">&quot;<span class="variable">$&#123;UBUNTU_CODENAME:-<span class="variable">$VERSION_CODENAME</span>&#125;</span>&quot;</span>)</span> stable&quot;</span> | \</span><br><span class="line">  <span class="built_in">sudo</span> <span class="built_in">tee</span> /etc/apt/sources.list.d/docker.list &gt; /dev/null</span><br></pre></td></tr></table></figure>

<ol>
<li><strong><code>echo &quot;deb [arch=...] ...&quot;</code></strong>：<ul>
<li>用于生成一个标准的 Debian&#x2F;Ubuntu 软件源条目（sources.list entry）。</li>
</ul>
</li>
<li><strong><code>[arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc]</code></strong>：<ul>
<li><code>arch=$(dpkg --print-architecture)</code>：这是一个<strong>命令替换</strong>。它会先执行 <code>dpkg --print-architecture</code> 命令（该命令会输出您系统的架构，如 <code>amd64</code> 或 <code>arm64</code>），然后用输出结果替换这部分内容。这确保了软件源地址与您的系统架构匹配。</li>
<li><code>signed-by=/etc/apt/keyrings/docker.asc</code>：<strong>极其重要</strong>。它明确指定了用于验证此软件源中所有软件包的 GPG 密钥的路径。这是确保软件包来自 Docker 官方而非恶意镜像的安全关键步骤。</li>
</ul>
</li>
<li><strong><code>http://mirrors.aliyun.com/docker-ce/linux/ubuntu</code></strong>：<ul>
<li>Docker 官方软件源的阿里云镜像地址。</li>
</ul>
</li>
<li><strong><code>$(. /etc/os-release &amp;&amp; echo &quot;${UBUNTU_CODENAME:-$VERSION_CODENAME}&quot;)</code></strong>：<ul>
<li>这是另一个<strong>命令替换</strong>和<strong>参数扩展</strong>的巧妙结合。</li>
<li><code>. /etc/os-release</code>：这会执行（source）一个系统文件，该文件包含当前 Ubuntu 版本的详细信息（如 <code>VERSION_ID=&quot;24.04&quot;</code>, <code>VERSION_CODENAME=noble</code>, <code>UBUNTU_CODENAME=noble</code>）。</li>
<li><code>&amp;&amp; echo &quot;${UBUNTU_CODENAME:-$VERSION_CODENAME}&quot;</code>：如果前一个命令成功，则执行 <code>echo</code>。<code>${UBUNTU_CODENAME:-$VERSION_CODENAME}</code> 是一个参数扩展，意思是“如果 <code>UBUNTU_CODENAME</code> 变量存在且不为空，则使用它的值；否则，使用 <code>VERSION_CODENAME</code> 的值”。</li>
<li>最终，这部分会被替换为您的 Ubuntu 系统代号，例如 <code>jammy</code> (22.04), <code>noble</code> (24.04) 等。这确保了您添加的软件源与您的系统版本完全匹配。</li>
</ul>
</li>
<li><strong><code>stable</code></strong>：<ul>
<li>指定要使用 Docker 的稳定版（stable）发布通道。而不是测试版（test）或夜间构建版（nightly）。</li>
</ul>
</li>
<li><strong><code>| sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null</code></strong>：<ul>
<li><code>|</code>：管道符，将 <code>echo</code> 命令的输出传递给 <code>tee</code> 命令。</li>
<li><code>tee</code>：一个同时输出到屏幕和文件的命令。这里与 <code>sudo</code> 一起使用，以便拥有向受保护目录写入的权限。</li>
<li><code>/etc/apt/sources.list.d/docker.list</code>：将软件源条目写入到 <code>/etc/apt/sources.list.d/</code> 目录下的一个新文件 <code>docker.list</code> 中。这是一种最佳实践，可以保持组织有序，并且更容易管理和删除单个软件的源。</li>
<li><code>&gt; /dev/null</code>：将 <code>tee</code> 命令输出到<strong>标准输出（屏幕）</strong> 的内容重定向到“空设备”，从而抑制任何输出，保持终端整洁。</li>
</ul>
</li>
</ol>
<p>查看结果：</p>
<p><img src="https://to-all-read.oss-cn-hangzhou.aliyuncs.com/blog/2025%2F10%2F31%2FUbuntu%2024.04%20%E5%AE%89%E8%A3%85%20Docker.assets%2FUbuntu2404Docker%E5%AE%89%E8%A3%85-25103017-02.png" alt="Ubuntu2404Docker安装-25103017-02"></p>
<h3 id="2-8-更新软件包索引"><a href="#2-8-更新软件包索引" class="headerlink" title="2.8 更新软件包索引"></a>2.8 更新软件包索引</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br></pre></td></tr></table></figure>

<p>在添加了新的软件源（Docker 源）之后，必须再次运行 <code>apt update</code>，这样 APT 才会知道这个新源的存在，并从中获取可用软件包的列表。如果不执行这一步，系统将找不到 Docker 软件包。</p>
<h3 id="2-9-安装-Docker"><a href="#2-9-安装-Docker" class="headerlink" title="2.9 安装 Docker"></a>2.9 安装 Docker</h3><p>安装<strong>最新版本</strong>的 Docker，包括 Docker 引擎及其相关组件。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span><br></pre></td></tr></table></figure>

<ol>
<li><code>docker-ce</code></li>
</ol>
<ul>
<li><strong>全称</strong>：Docker Community Edition</li>
<li><strong>作用</strong>：这是 <strong>Docker 引擎的核心</strong>，也就是常说的 “Docker 守护进程” (<code>dockerd</code>)。</li>
<li><strong>功能</strong>：它是一个持续运行的后台服务，负责管理 Docker 的方方面面：<ul>
<li>下载和存储镜像（Images）。</li>
<li>创建、运行、停止和删除容器（Containers）。</li>
<li>管理网络（Networks）和存储卷（Volumes）。</li>
<li>暴露 REST API 供其他工具（如 CLI）调用。</li>
</ul>
</li>
<li><strong>简言之</strong>：它是 Docker 的“大脑”和“发动机”。</li>
</ul>
<ol start="2">
<li><code>docker-ce-cli</code></li>
</ol>
<ul>
<li><strong>全称</strong>：Docker Community Edition Command Line Interface</li>
<li><strong>作用</strong>：这是 <strong>Docker 的命令行工具</strong>。你平时在终端里打的 <code>docker</code> 命令就来自于它。</li>
<li><strong>功能</strong>：它本身不执行管理操作，而是作为一个客户端，接收你的命令（如 <code>docker run</code>, <code>docker ps</code>），然后通过 API 与上面的 <code>docker-ce</code> 守护进程通信，并告诉你结果。</li>
<li><strong>简言之</strong>：它是用户与 Docker 引擎交互的“遥控器”。</li>
</ul>
<ol start="3">
<li><code>containerd.io</code></li>
</ol>
<ul>
<li><strong>作用</strong>：这是一个<strong>行业标准的容器运行时</strong>。它是更底层、更核心的组件。</li>
<li><strong>功能</strong>：它负责容器生命周期的最底层操作，例如：<ul>
<li>从镜像中拉取和存储容器文件系统层。</li>
<li>管理容器的执行、暂停、恢复和销毁。</li>
<li>管理容器网络和存储的低级细节。</li>
</ul>
</li>
<li><strong>与 Docker 的关系</strong>：从 Docker 的架构演变来看，<code>docker-ce</code>（守护进程）现在将大部分实际的容器运行时操作<strong>委托</strong>给了 <code>containerd</code>。这种解耦使得架构更清晰，<code>containerd</code> 也可以被其他系统（如 Kubernetes）直接使用。</li>
<li><strong>简言之</strong>：它是真正“动手”拉取镜像和运行容器的“工程师”，而 <code>docker-ce</code> 是它的“项目经理”。</li>
</ul>
<ol start="4">
<li><code>docker-buildx-plugin</code></li>
</ol>
<ul>
<li><strong>作用</strong>：Docker 的<strong>扩展构建插件</strong>，提供了下一代强大的镜像构建功能。</li>
<li><strong>功能</strong>：它是 <code>docker build</code> 命令的增强版，支持许多高级特性：<ul>
<li><strong>多平台构建</strong>：一次性为多种 CPU 架构（如 amd64, arm64, arm&#x2F;v7）构建镜像，无需复杂的交叉编译环境。</li>
<li><strong>构建缓存管理</strong>：更高效的缓存机制，加速构建过程。</li>
<li><strong>并行构建</strong>：等等。</li>
</ul>
</li>
<li><strong>注意</strong>：在较新版本的 Docker 中，<code>buildx</code> 已成为默认的构建引擎。</li>
</ul>
<ol start="5">
<li><code>docker-compose-plugin</code></li>
</ol>
<ul>
<li><strong>作用</strong>：Docker 官方提供的 <strong>Compose 功能</strong>，用于定义和运行多容器应用。</li>
<li><strong>功能</strong>：它提供了 <code>docker compose</code> 命令（注意没有横线），用来替代旧的、独立的 <code>docker-compose</code>（Python 编写）工具。<ul>
<li>通过一个 <code>docker-compose.yml</code> 文件来配置你的应用所需的所有服务、网络、卷。</li>
<li>用一个命令（<code>docker compose up</code>）就能启动整个复杂的应用栈（例如一个包含 Web 前端、后端 API、数据库、缓存的应用）。</li>
</ul>
</li>
<li><strong>为什么是插件形式</strong>：Docker 公司为了更好的集成和发布周期，将 Compose 功能做成了 CLI 插件，而不是一个独立的二进制文件。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">    A[用户] --&gt; B[docker-ce-cli&lt;br&gt;CLI 命令行]</span><br><span class="line">    B -- 发送指令 --&gt; C[docker-ce&lt;br&gt;守护进程]</span><br><span class="line">    C -- 调度容器操作 --&gt; D[containerd.io&lt;br&gt;容器运行时]</span><br><span class="line">    D -- 真正运行容器 --&gt; E[Linux Kernel&lt;br&gt;系统内核]</span><br><span class="line"></span><br><span class="line">    F[docker-compose-plugin] -- 解析yml文件 --&gt; C</span><br><span class="line">    G[docker-buildx-plugin] -- 处理构建请求 --&gt; C</span><br></pre></td></tr></table></figure>

<p><img src="https://to-all-read.oss-cn-hangzhou.aliyuncs.com/blog/2025%2F10%2F31%2FUbuntu%2024.04%20%E5%AE%89%E8%A3%85%20Docker.assets%2FUbuntu2404Docker%E5%AE%89%E8%A3%85-25103017-03.png" alt="Ubuntu2404Docker安装-25103017-03"></p>
<h3 id="2-10-验证安装是否成功"><a href="#2-10-验证安装是否成功" class="headerlink" title="2.10 验证安装是否成功"></a>2.10 验证安装是否成功</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker -v</span><br></pre></td></tr></table></figure>

<p><img src="https://to-all-read.oss-cn-hangzhou.aliyuncs.com/blog/2025%2F10%2F31%2FUbuntu%2024.04%20%E5%AE%89%E8%A3%85%20Docker.assets%2FUbuntu2404Docker%E5%AE%89%E8%A3%85-25103017-04.png" alt="Ubuntu2404Docker安装-25103017-04"> </p>
<h3 id="2-11-开机自启"><a href="#2-11-开机自启" class="headerlink" title="2.11 开机自启"></a>2.11 开机自启</h3><p><strong>安装成功后，Docker 服务将会开机自动启动。</strong></p>
<p>执行 <code>systemctl is-enabled docker</code> 命令，可以看到输出是 <code>enabled</code>，说明 Docker 已经设置为开机自动启动了</p>
<p><img src="https://to-all-read.oss-cn-hangzhou.aliyuncs.com/blog/2025%2F10%2F31%2FUbuntu%2024.04%20%E5%AE%89%E8%A3%85%20Docker.assets%2FUbuntu2404Docker%E5%AE%89%E8%A3%85-25103017-05.png" alt="Ubuntu2404Docker安装-25103017-05"> </p>
<h2 id="三、替换国内镜像源"><a href="#三、替换国内镜像源" class="headerlink" title="三、替换国内镜像源"></a>三、替换国内镜像源</h2><h3 id="3-1-拉取镜像失败"><a href="#3-1-拉取镜像失败" class="headerlink" title="3.1 拉取镜像失败"></a>3.1 拉取镜像失败</h3><p>当前 Docker 状态：</p>
<p><img src="https://to-all-read.oss-cn-hangzhou.aliyuncs.com/blog/2025%2F10%2F31%2FUbuntu%2024.04%20%E5%AE%89%E8%A3%85%20Docker.assets%2FUbuntu2404Docker%E5%AE%89%E8%A3%85-25103017-06.png" alt="Ubuntu2404Docker安装-25103017-06"> </p>
<p>现在已经安装好 Docker 了，但还不能完全使用。</p>
<p>当前拉取镜像时，是从 Docker Hub 中拉取的。但国内访问 Docker Hub 时，会无法访问，导致无法拉取镜像。</p>
<p><img src="https://to-all-read.oss-cn-hangzhou.aliyuncs.com/blog/2025%2F10%2F31%2FUbuntu%2024.04%20%E5%AE%89%E8%A3%85%20Docker.assets%2FUbuntu2404Docker%E5%AE%89%E8%A3%85-25103017-07.png" alt="Ubuntu2404Docker安装-25103017-07"> </p>
<p>对于这种情况，建议<strong>添加国内镜像源地址</strong>。</p>
<p>但请放心，国内镜像源本质上是<strong>为了提升访问速度而建立的 Docker Hub 缓存代理</strong>。它会帮你从 Docker Hub 拉取镜像，并将这些镜像存储在自己的服务器上。你通过它们下载的镜像，<strong>源头依然是 Docker Hub</strong>。你可以把它们理解为设立在身边的 Docker Hub “分身”，旨在解决远距离访问速度慢的问题。</p>
<p>国内镜像源工作流程：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">flowchart TD</span><br><span class="line">    A[用户发起 docker pull 请求&lt;br&gt;例如: docker pull nginx] --&gt; B&#123;请求被拦截并转发&#125;</span><br><span class="line">    B --&gt; C[配置的国内镜像源&lt;br&gt;如 docker.xuanyuan.me]</span><br><span class="line"></span><br><span class="line">    subgraph C [镜像加速器 - Docker Hub 的缓存代理]</span><br><span class="line">        D&#123;检查镜像是否已缓存?&#125;</span><br><span class="line">        D -- 是 --&gt; E[直接从缓存返回镜像]</span><br><span class="line">        D -- 否 --&gt; F[向 Docker Hub 发起请求]</span><br><span class="line">        F --&gt; G[缓存镜像到本地]</span><br><span class="line">        G --&gt; H[返回镜像给用户]</span><br><span class="line">    end</span><br><span class="line"></span><br><span class="line">    E --&gt; I[用户获得镜像]</span><br><span class="line">    H --&gt; I</span><br><span class="line"></span><br><span class="line">    F -.-&gt; J[Docker Hub&lt;br&gt;hub.docker.com]</span><br></pre></td></tr></table></figure>



<h3 id="3-2-打开配置文件"><a href="#3-2-打开配置文件" class="headerlink" title="3.2 打开配置文件"></a>3.2 打开配置文件</h3><p>当前 Docker 28.4.0 版本中，并没有存在配置文件，因此需要创建并打开。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> vim /etc/docker/daemon.json</span><br></pre></td></tr></table></figure>



<h3 id="3-3-添加镜像源"><a href="#3-3-添加镜像源" class="headerlink" title="3.3 添加镜像源"></a>3.3 添加镜像源</h3><p>当前一些可用的镜像源列表：</p>
<table>
<thead>
<tr>
<th align="left">镜像源名称</th>
<th align="left">镜像加速地址</th>
<th align="left">主要特点&#x2F;备注</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>DaoCloud 镜像站</strong></td>
<td align="left"><code>https://docker.m.daocloud.io</code></td>
<td align="left">国内老牌服务商，稳定可靠</td>
</tr>
<tr>
<td align="left"><strong>网易云镜像加速</strong></td>
<td align="left"><code>http://hub-mirror.c.163.com</code></td>
<td align="left">多节点覆盖</td>
</tr>
<tr>
<td align="left"><strong>中国科学技术大学</strong></td>
<td align="left"><code>https://docker.mirrors.ustc.edu.cn</code></td>
<td align="left">教育网用户访问效果可能较好</td>
</tr>
<tr>
<td align="left"><strong>南京大学镜像站</strong></td>
<td align="left"><code>https://docker.nju.edu.cn</code></td>
<td align="left">支持 Docker Hub、GCR、GHCR、Quay、NVCR 等</td>
</tr>
<tr>
<td align="left"><strong>Docker 中国官方镜像</strong></td>
<td align="left"><code>https://registry.docker-cn.com</code></td>
<td align="left">官方认证，适合企业环境</td>
</tr>
</tbody></table>
<p>在配置时，我们一般会配置多个镜像源。</p>
<p>Docker 会<strong>严格按照配置文件中列出的顺序</strong>来尝试镜像源，这时如果第一个源出现问题了，它会继续尝试第二个，以此类推。</p>
<p><strong>它不会自动选择“最快”的镜像源</strong>。因此建议将<strong>最稳定、最快、最可靠的镜像源放在第一位</strong>。</p>
<p>具体配置如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;registry-mirrors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;https://docker.m.daocloud.io&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;http://hub-mirror.c.163.com&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;https://docker.nju.edu.cn&quot;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p><img src="https://to-all-read.oss-cn-hangzhou.aliyuncs.com/blog/2025%2F10%2F31%2FUbuntu%2024.04%20%E5%AE%89%E8%A3%85%20Docker.assets%2FUbuntu2404Docker%E5%AE%89%E8%A3%85-25103017-08.png" alt="Ubuntu2404Docker安装-25103017-08"> </p>
<p>注意：这些镜像源的设置<strong>不会影响</strong> <code>docker search</code> 命令的搜索来源，<code>docker search</code> 默认依然是从 Docker Hub 的官方仓库查询。</p>
<h3 id="3-4-重启-Docker-服务"><a href="#3-4-重启-Docker-服务" class="headerlink" title="3.4 重启 Docker 服务"></a>3.4 重启 Docker 服务</h3><p>重启 Docker 服务，实现镜像源更改。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl restart docker</span><br></pre></td></tr></table></figure>

<p>如果修改了服务配置（例如，修改了 Docker 的 <code>docker.service</code> 文件中的环境变量、启动参数或依赖关系），<code>systemd</code>（Linux 的系统和服务管理器） 并不会自动感知到这个变化。</p>
<p><code>systemctl daemon-reload</code> 命令会<strong>通知 <code>systemd</code> 去重新读取并加载所有服务单元文件</strong>的更改，使新的配置生效。</p>
<p>当然，它只是让 <code>systemd</code> 记住了新的配置，只有下次启动服务时才会应用。</p>
<p>我们当前修改的配置文件是 daemon.json，在重启服务前无需执行 <code>sudo systemctl daemon-reload</code> 这个命令。</p>
<h3 id="3-5-验证配置"><a href="#3-5-验证配置" class="headerlink" title="3.5 验证配置"></a>3.5 验证配置</h3><p>重启后，查看一下镜像源配置是否成功。可以看到相比最初，增加了 <code>Registry Mirrors</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> docker info</span><br></pre></td></tr></table></figure>

<p><img src="https://to-all-read.oss-cn-hangzhou.aliyuncs.com/blog/2025%2F10%2F31%2FUbuntu%2024.04%20%E5%AE%89%E8%A3%85%20Docker.assets%2FUbuntu2404Docker%E5%AE%89%E8%A3%85-25103017-09.png" alt="Ubuntu2404Docker安装-25103017-09"> </p>
<h3 id="3-6-测试"><a href="#3-6-测试" class="headerlink" title="3.6 测试"></a>3.6 测试</h3><p>现在我们可以正常拉取镜像并执行了，拉取（如果本地没有）<code>hello-world</code> 镜像，并创建一个新的容器来运行它，输出 “Hello from Docker!” 等信息，则表明成功。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> docker container run hello-world</span><br></pre></td></tr></table></figure>

<p><img src="https://to-all-read.oss-cn-hangzhou.aliyuncs.com/blog/2025%2F10%2F31%2FUbuntu%2024.04%20%E5%AE%89%E8%A3%85%20Docker.assets%2FUbuntu2404Docker%E5%AE%89%E8%A3%85-25103017-10.png" alt="Ubuntu2404Docker安装-25103017-10"> </p>
<h2 id="四、添加当前用户到用户组"><a href="#四、添加当前用户到用户组" class="headerlink" title="四、添加当前用户到用户组"></a>四、添加当前用户到用户组</h2><h3 id="4-1-权限说明"><a href="#4-1-权限说明" class="headerlink" title="4.1 权限说明"></a>4.1 权限说明</h3><p>默认情况下，只有 root 用户和组名为 <code>docker</code> 的用户组用户才能执行 Docker 命令。</p>
<p>普通用户执行 Docker 命令时需要添加 <code>sudo</code>，如果觉得麻烦，可以将用户添加到 Docker 用户组。</p>
<blockquote>
<p>Docker 守护进程（<code>dockerd</code>）启动后，会创建一个用于通信的 Unix 套接字（Socket）文件，默认路径是 <code>/var/run/docker.sock</code>。</p>
<p>通过命令可以查看到这个文件的详细信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lanyu@server:~$ <span class="built_in">ls</span> -l /var/run/docker.sock</span><br><span class="line">srw-rw---- 1 root docker 0 Sep 15 09:37 /var/run/docker.sock</span><br></pre></td></tr></table></figure>

<p>这里的关键信息是：</p>
<ul>
<li><strong>所有者 (Owner)</strong>: <code>root</code></li>
<li><strong>所属组 (Group)</strong>: <code>docker</code></li>
<li><strong>权限 (Permissions)</strong>: <code>srw-rw----</code>（其中的 <code>rw-</code> 表示所属组具有读写权限）</li>
</ul>
<p>这意味着：</p>
<ol>
<li><strong>root 用户</strong> 永远可以直接操作这个套接字（所以用 <code>sudo</code> 总能运行 Docker 命令）。</li>
<li>所有属于 <strong><code>docker</code> 组</strong> 的用户也具有读写权限，因此可以无需 <code>sudo</code> 直接与 Docker 守护进程通信。</li>
<li>其他用户则没有任何权限。</li>
</ol>
<p>虽然可以通过修改配置文件 <code>daemon.json</code> 的方式，修改默认组名，但不推荐。</p>
</blockquote>
<h3 id="4-2-查看用户组"><a href="#4-2-查看用户组" class="headerlink" title="4.2 查看用户组"></a>4.2 查看用户组</h3><p>默认情况下，安装好 Docker 后，会自动创建一个用户组，通过以下命令可以查看 <strong><code>docker</code> 组</strong> 信息。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep docker /etc/group</span><br></pre></td></tr></table></figure>

<p><img src="https://to-all-read.oss-cn-hangzhou.aliyuncs.com/blog/2025%2F10%2F31%2FUbuntu%2024.04%20%E5%AE%89%E8%A3%85%20Docker.assets%2FUbuntu2404Docker%E5%AE%89%E8%A3%85-25103017-11.png" alt="Ubuntu2404Docker安装-25103017-11"> </p>
<p><code>/etc/group</code> 文件存储了系统中所有<strong>用户组（Group）</strong> 的定义信息，其中的每一行都代表一个用户组，其格式由冒号 <code>:</code> 分隔为四个字段。</p>
<table>
<thead>
<tr>
<th align="left">示例值</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>docker</code></td>
<td align="left"><strong>用户组的名称</strong>。这就是你查询的组。</td>
</tr>
<tr>
<td align="left"><code>x</code></td>
<td align="left"><strong>经过加密的组密码</strong>。几乎总是显示为 <code>x</code>，表示密码实际上被存储在更安全的 <code>/etc/gshadow</code> 文件中。通常组密码很少使用。</td>
</tr>
<tr>
<td align="left"><code>988</code></td>
<td align="left"><strong>组ID (GID)</strong>。这是系统用来识别这个组的唯一数字。<strong>这个数字在不同系统上可能不同</strong>（常见的有 999, 998 等），988 是完全正常的。</td>
</tr>
<tr>
<td align="left"><strong>(空)</strong></td>
<td align="left"><strong>属于该组的用户成员列表</strong>。这个字段是空的，表示目前<strong>没有用户被直接添加为这个组的成员</strong>。</td>
</tr>
</tbody></table>
<p>如果没有任何返回，那么可以执行 <code>sudo groupadd docker</code> 命令去创建一个名为 <code>docker</code> 的用户组。</p>
<h3 id="4-3-添加当前用户"><a href="#4-3-添加当前用户" class="headerlink" title="4.3 添加当前用户"></a>4.3 添加当前用户</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> usermod -aG docker <span class="variable">$USER</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>usermod</code>：修改用户属性的命令</li>
<li><code>-aG</code>：追加到附加组 (Append to Supplementary Groups)</li>
<li><code>docker</code>：目标用户组的名称</li>
<li><code>$USER</code>：shell 环境变量，代表当前用户名</li>
</ul>
<p>完成后，再次查看用户组，可以看到当前用户已经添加成功。</p>
<p><img src="https://to-all-read.oss-cn-hangzhou.aliyuncs.com/blog/2025%2F10%2F31%2FUbuntu%2024.04%20%E5%AE%89%E8%A3%85%20Docker.assets%2FUbuntu2404Docker%E5%AE%89%E8%A3%85-25103017-12.png" alt="Ubuntu2404Docker安装-25103017-12"> </p>
<h3 id="4-4-切换到-docker-组"><a href="#4-4-切换到-docker-组" class="headerlink" title="4.4 切换到 docker 组"></a>4.4 切换到 <code>docker</code> 组</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">newgrp docker</span><br></pre></td></tr></table></figure>

<p><code>newgrp</code> 命令的主要目的是<strong>临时性地将当前用户会话（terminal session）的主要组（primary group）或附加组（supplementary group）的权限生效</strong>。</p>
<p>当前用户已经添加到 <code>docker</code> 组，这个更改虽然被写入了 <code>/etc/group</code> 文件，但<strong>不会自动应用到你已经登录的当前会话中</strong>。</p>
<p>要让新的组权限生效，有三种方式：</p>
<ul>
<li><strong>注销后重新登录</strong>（最彻底的方式）。</li>
<li><strong>打开一个新的终端窗口</strong>（新的会话会读取新的组信息）。</li>
<li>使用 <strong><code>newgrp</code></strong> 命令（如果执行 <code>exit</code> 命令会退回到当前用户之前的权限）。</li>
</ul>
<p>我们使用 FinalShell 连接，其实<strong>打开一个新的终端窗口更方便</strong>。</p>
<h3 id="4-5-测试"><a href="#4-5-测试" class="headerlink" title="4.5 测试"></a>4.5 测试</h3><p>执行一个 Docker 命令不加 <code>sudo</code> ，比如 <code>docker images</code>，可以看到命令正常运行。</p>
<p><img src="https://to-all-read.oss-cn-hangzhou.aliyuncs.com/blog/2025%2F10%2F31%2FUbuntu%2024.04%20%E5%AE%89%E8%A3%85%20Docker.assets%2FUbuntu2404Docker%E5%AE%89%E8%A3%85-25103017-13.png" alt="Ubuntu2404Docker安装-25103017-13"> </p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://example.com">蓝羽天空</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2025/10/31/7.%E4%BA%91%E5%8E%9F%E7%94%9F%E4%B8%8E%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/Docker/Ubuntu%2024.04%20%E5%AE%89%E8%A3%85%20Docker/">http://example.com/2025/10/31/7.%E4%BA%91%E5%8E%9F%E7%94%9F%E4%B8%8E%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/Docker/Ubuntu%2024.04%20%E5%AE%89%E8%A3%85%20Docker/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://example.com" target="_blank">蓝羽天空</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Docker/">Docker</a><a class="post-meta__tags" href="/tags/%E5%AE%89%E8%A3%85/">安装</a></div><div class="post-share"><div class="social-share" data-image="https://to-all-read.oss-cn-hangzhou.aliyuncs.com/blog/logo/Ubuntu2404Docker%E5%AE%89%E8%A3%85-logo.jpg" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related full-width" href="/2025/10/31/7.%E4%BA%91%E5%8E%9F%E7%94%9F%E4%B8%8E%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/Docker/Docker%20%E5%AE%89%E8%A3%85%20Oracle%2019/" title="Docker 安装 Oracle 19c"><img class="cover" src="https://to-all-read.oss-cn-hangzhou.aliyuncs.com/blog/logo/DockerOracle19c%E5%AE%89%E8%A3%85-logo.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Docker 安装 Oracle 19c</div></div><div class="info-2"><div class="info-item-1">在虚拟机 VMware 的 Linux 系统中，通过 Docker 安装 Oracle 19c</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/10/31/7.%E4%BA%91%E5%8E%9F%E7%94%9F%E4%B8%8E%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/Docker/Docker%20%E5%AE%89%E8%A3%85%20Oracle%2019/" title="Docker 安装 Oracle 19c"><img class="cover" src="https://to-all-read.oss-cn-hangzhou.aliyuncs.com/blog/logo/DockerOracle19c%E5%AE%89%E8%A3%85-logo.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-10-31</div><div class="info-item-2">Docker 安装 Oracle 19c</div></div><div class="info-2"><div class="info-item-1">在虚拟机 VMware 的 Linux 系统中，通过 Docker 安装 Oracle 19c</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/butterfly-icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">蓝羽天空</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">3</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">4</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/xxxxx" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:xxxxxx@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">刚刚建站，还需优化，按钮不知道跳到哪里！！！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E7%8E%AF%E5%A2%83%E8%AF%B4%E6%98%8E"><span class="toc-text">一、环境说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%AE%89%E8%A3%85-Docker"><span class="toc-text">二、安装 Docker</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E9%AA%8C%E8%AF%81%E5%BD%93%E5%89%8D%E7%B3%BB%E7%BB%9F%E6%98%AF%E5%90%A6%E5%AE%89%E8%A3%85-Docker"><span class="toc-text">2.1 验证当前系统是否安装 Docker</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E6%9B%B4%E6%96%B0%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%B4%A2%E5%BC%95"><span class="toc-text">2.2 更新软件包索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%E5%8C%85"><span class="toc-text">2.3 安装依赖包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E5%88%9B%E5%BB%BA%E7%94%A8%E4%BA%8E%E5%AD%98%E5%82%A8-GPG-%E5%AF%86%E9%92%A5%E7%9A%84%E7%9B%AE%E5%BD%95"><span class="toc-text">2.4 创建用于存储 GPG 密钥的目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-%E4%B8%8B%E8%BD%BD-GPG-%E5%AF%86%E9%92%A5"><span class="toc-text">2.5 下载 GPG 密钥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-%E6%9B%B4%E6%94%B9%E5%AF%86%E9%92%A5%E6%96%87%E4%BB%B6%E7%9A%84%E6%9D%83%E9%99%90"><span class="toc-text">2.6 更改密钥文件的权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-%E6%B7%BB%E5%8A%A0-Docker-%E7%9A%84%E8%BD%AF%E4%BB%B6%E6%BA%90"><span class="toc-text">2.7 添加 Docker 的软件源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8-%E6%9B%B4%E6%96%B0%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%B4%A2%E5%BC%95"><span class="toc-text">2.8 更新软件包索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-9-%E5%AE%89%E8%A3%85-Docker"><span class="toc-text">2.9 安装 Docker</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-10-%E9%AA%8C%E8%AF%81%E5%AE%89%E8%A3%85%E6%98%AF%E5%90%A6%E6%88%90%E5%8A%9F"><span class="toc-text">2.10 验证安装是否成功</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-11-%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF"><span class="toc-text">2.11 开机自启</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%9B%BF%E6%8D%A2%E5%9B%BD%E5%86%85%E9%95%9C%E5%83%8F%E6%BA%90"><span class="toc-text">三、替换国内镜像源</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E6%8B%89%E5%8F%96%E9%95%9C%E5%83%8F%E5%A4%B1%E8%B4%A5"><span class="toc-text">3.1 拉取镜像失败</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E6%89%93%E5%BC%80%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">3.2 打开配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E6%B7%BB%E5%8A%A0%E9%95%9C%E5%83%8F%E6%BA%90"><span class="toc-text">3.3 添加镜像源</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E9%87%8D%E5%90%AF-Docker-%E6%9C%8D%E5%8A%A1"><span class="toc-text">3.4 重启 Docker 服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-%E9%AA%8C%E8%AF%81%E9%85%8D%E7%BD%AE"><span class="toc-text">3.5 验证配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-%E6%B5%8B%E8%AF%95"><span class="toc-text">3.6 测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E6%B7%BB%E5%8A%A0%E5%BD%93%E5%89%8D%E7%94%A8%E6%88%B7%E5%88%B0%E7%94%A8%E6%88%B7%E7%BB%84"><span class="toc-text">四、添加当前用户到用户组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E6%9D%83%E9%99%90%E8%AF%B4%E6%98%8E"><span class="toc-text">4.1 权限说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E6%9F%A5%E7%9C%8B%E7%94%A8%E6%88%B7%E7%BB%84"><span class="toc-text">4.2 查看用户组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E6%B7%BB%E5%8A%A0%E5%BD%93%E5%89%8D%E7%94%A8%E6%88%B7"><span class="toc-text">4.3 添加当前用户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-%E5%88%87%E6%8D%A2%E5%88%B0-docker-%E7%BB%84"><span class="toc-text">4.4 切换到 docker 组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-%E6%B5%8B%E8%AF%95"><span class="toc-text">4.5 测试</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/10/31/7.%E4%BA%91%E5%8E%9F%E7%94%9F%E4%B8%8E%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/Docker/Docker%20%E5%AE%89%E8%A3%85%20Oracle%2019/" title="Docker 安装 Oracle 19c"><img src="https://to-all-read.oss-cn-hangzhou.aliyuncs.com/blog/logo/DockerOracle19c%E5%AE%89%E8%A3%85-logo.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker 安装 Oracle 19c"/></a><div class="content"><a class="title" href="/2025/10/31/7.%E4%BA%91%E5%8E%9F%E7%94%9F%E4%B8%8E%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/Docker/Docker%20%E5%AE%89%E8%A3%85%20Oracle%2019/" title="Docker 安装 Oracle 19c">Docker 安装 Oracle 19c</a><time datetime="2025-10-30T16:00:00.000Z" title="发表于 2025-10-31 00:00:00">2025-10-31</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/10/31/7.%E4%BA%91%E5%8E%9F%E7%94%9F%E4%B8%8E%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/Docker/Ubuntu%2024.04%20%E5%AE%89%E8%A3%85%20Docker/" title="Ubuntu 24.04 安装 Docker"><img src="https://to-all-read.oss-cn-hangzhou.aliyuncs.com/blog/logo/Ubuntu2404Docker%E5%AE%89%E8%A3%85-logo.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Ubuntu 24.04 安装 Docker"/></a><div class="content"><a class="title" href="/2025/10/31/7.%E4%BA%91%E5%8E%9F%E7%94%9F%E4%B8%8E%E5%88%86%E5%B8%83%E5%BC%8F%E6%9E%B6%E6%9E%84/Docker/Ubuntu%2024.04%20%E5%AE%89%E8%A3%85%20Docker/" title="Ubuntu 24.04 安装 Docker">Ubuntu 24.04 安装 Docker</a><time datetime="2025-10-30T16:00:00.000Z" title="发表于 2025-10-31 00:00:00">2025-10-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/10/22/hello-world/" title="Hello World">Hello World</a><time datetime="2025-10-21T16:00:00.000Z" title="发表于 2025-10-22 00:00:00">2025-10-22</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 By 蓝羽天空</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 8.0.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.1</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.1"></script><script src="/js/main.js?v=5.5.1"></script><div class="js-pjax"></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/dist/fireworks.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>